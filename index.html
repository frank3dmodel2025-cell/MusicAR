<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web AR de Coche 3D</title>
    <!-- Script para importar el componente Model-viewer de Google -->
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
        /* Estilos generales para ocupar toda la pantalla */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7;
        }

        /* El componente model-viewer ocupa la mayor parte de la ventana */
        model-viewer {
            width: 100vw;
            height: 90vh; /* Usa 90vh para dejar espacio para el menú o el botón AR */
            background-color: #e0f2f1; /* Un fondo suave para el visor 3D */
            border: none;
        }

        /* Estilos para el botón AR personalizado */
        #ar-button {
            /* Posicionamiento para centrar horizontalmente en la parte inferior */
            position: absolute;
            left: 50%;
            transform: translateX(-50%); /* Centra el botón perfectamente */
            bottom: 35px; 
            
            /* Estilos de botón */
            width: 180px;
            height: 55px;
            background-color: #00897b; /* Color verde azulado */
            color: white;
            border: none;
            border-radius: 12px;
            padding: 10px 20px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s ease, transform 0.1s ease;
            z-index: 10; /* Asegura que esté por encima del modelo */
        }

        #ar-button:hover {
            background-color: #00695c;
        }

        #ar-button:active {
            transform: translateX(-50%) scale(0.98); /* Mantiene el centrado al hacer clic */
        }

        /* Contenedor para el título y descripción */
        .header-bar {
            width: 100%;
            height: 10vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #ffffff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .header-bar h1 {
            font-size: 1.2rem;
            color: #004d40;
            margin: 0;
        }

        /* Media Query para móvil: ajustar el tamaño del botón */
        @media (max-width: 600px) {
            #ar-button {
                bottom: 20px;
                width: 150px;
                height: 45px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="header-bar">
        <h1>Modelo 3D Interactivo (Anclaje Fijo AR)</h1>
    </div>

    <!-- 
        El componente model-viewer con atributos clave:
        - ar-modes="scene-viewer quick-look": Esta configuración es clave.
          Fuerza el uso de los visores nativos de iOS (Quick Look) y Android (Scene Viewer),
          los cuales manejan el modelo con un solo toque y lo dejan ANCLADO, 
          cumpliendo con la lógica de "no moverse después del primer toque".
    -->
    <model-viewer 
        src="https://modelviewer.dev/shared-assets/models/Astronaut.glb"
        ios-src="https://modelviewer.dev/shared-assets/models/Astronaut.usdz"
        ar-modes="scene-viewer quick-look"
        camera-controls
        touch-action="pan-y"
        shadow-intensity="1"
        alt="Un modelo 3D de un astronauta"
        exposure="1.0"
        shadow-softness="1">

        <!-- Botón personalizado para iniciar la Realidad Aumentada -->
        <button slot="ar-button" id="ar-button">
            Iniciar AR (Anclaje Fijo)
        </button>

    </model-viewer>

    <!--
        NOTA IMPORTANTE: 
        Para lograr el "Anclaje Fijo", se usan los modos nativos de AR (Scene Viewer y Quick Look).
        Una vez que el usuario toca la pantalla para colocar el modelo, este queda ANCLADO.
        Los gestos complejos como "doble toque para desbloquear" no se pueden controlar 
        desde el código del navegador en estos modos nativos.
    -->

</body>
</html>
